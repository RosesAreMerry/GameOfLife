(()=>{"use strict";var t=function(){function t(t){this.currentX=.9,this.currentY=.9,this.currentZoom=10,this.context=t}return t.prototype.draw=function(t){var n=this.context;n.clearRect(0,0,n.canvas.width,n.canvas.height),n.beginPath(),n.strokeStyle="grey",n.lineWidth=1;for(var e=n.canvas.width/this.currentZoom,r=this.currentX%1*e,o=this.currentY%1*e,c=r;c<n.canvas.width;c+=e)n.moveTo(c,0),n.lineTo(c,n.canvas.height);for(var a=o;a<n.canvas.height;a+=e)n.moveTo(0,a),n.lineTo(n.canvas.width,a);for(n.stroke(),n.beginPath(),n.lineWidth=1,n.strokeStyle="white",c=r-e;c<n.canvas.width+e;c+=e)for(a=o-e;a<n.canvas.height+e;a+=e)n.moveTo(c,a),t["".concat(Math.floor(c/e-this.currentX+.01),",").concat(Math.floor(a/e-this.currentY+.01))]&&(n.fillStyle="white",n.fillRect(c,a,e,e),n.strokeRect(c,a,e,e));n.fill(),n.stroke()},t}();const n=t;function e(t){var n={};for(var e in t){for(var c=e.split(",").map((function(t){return Number(t)})),a=0,i=r(c);a<i.length;a++){var h=i[a];t["".concat(h[0],",").concat(h[1])]||o(h,t)&&(n["".concat(h[0],",").concat(h[1])]=!0)}o(c,t,!0)&&(n["".concat(c[0],",").concat(c[1])]=!0)}return n}function r(t){for(var n=[],e=-1;e<=1;e++)for(var r=-1;r<=1;r++)0==e&&0==r||n.push([t[0]+e,t[1]+r]);return n}function o(t,n,e){void 0===e&&(e=!1);var o=r(t).map((function(t){return!!n["".concat(t[0],",").concat(t[1])]})).filter((function(t){return t})).length;return e&&2==o||3==o}var c=document.getElementById("gameWorld"),a=c.getContext("2d");a.canvas.width=window.innerWidth,a.canvas.height=window.innerHeight;var i,h=new n(a),l={};function u(){l=e(l),h.draw(l)}h.draw(l);var v=250;c.addEventListener("keydown",(function(t){" "==t.key&&(i?(clearInterval(i),i=null):i=setInterval(u,v)),"ArrowRight"==t.key&&(v*=.5,clearInterval(i),i=setInterval(u,v),console.log(v)),"ArrowLeft"==t.key&&(v*=2,clearInterval(i),i=setInterval(u,v),console.log(v)),"ArrowUp"==t.key&&(i||u())})),c.addEventListener("wheel",(function(t){var n=.01*t.deltaY;h.currentZoom+=n,h.currentZoom<10&&(h.currentZoom=10),h.currentZoom>100&&(h.currentZoom=100);var e=t.clientX,r=t.clientY,o=n*(e/c.width),a=n*(r/c.height);h.currentX+=o,h.currentY+=a,h.draw(l)})),c.addEventListener("click",(function(t){var n=t.clientX,r=t.clientY,o=a.canvas.width/h.currentZoom,c=Math.floor(n/o-h.currentX+.01),i=Math.floor(r/o-h.currentY+.01);l["".concat(c,",").concat(i)]=!0,h.draw(l),e(l)})),c.addEventListener("contextmenu",(function(t){t.preventDefault();var n=t.clientX,e=t.clientY,r=a.canvas.width/h.currentZoom,o=Math.floor(n/r-h.currentX+.01),c=Math.floor(e/r-h.currentY+.01);delete l["".concat(o,",").concat(c)],h.draw(l)})),window.addEventListener("resize",(function(){a.canvas.width=window.innerWidth,a.canvas.height=window.innerHeight,h.draw(l)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJtQkFDQSxpQkFPRSxXQUFZQSxHQUpaLEtBQUFDLFNBQW1CLEdBQ25CLEtBQUFDLFNBQW1CLEdBQ25CLEtBQUFDLFlBQXNCLEdBR3BCQyxLQUFLSixRQUFVQSxDQUNqQixDQWlERixPQS9DRSxZQUFBSyxLQUFBLFNBQUtDLEdBRUgsSUFBTUMsRUFBTUgsS0FBS0osUUFFakJPLEVBQUlDLFVBQVUsRUFBRyxFQUFHRCxFQUFJRSxPQUFPQyxNQUFPSCxFQUFJRSxPQUFPRSxRQUNqREosRUFBSUssWUFDSkwsRUFBSU0sWUFBYyxPQUNsQk4sRUFBSU8sVUFBWSxFQVVoQixJQU5BLElBQU1DLEVBQVdSLEVBQUlFLE9BQU9DLE1BQVFOLEtBQUtELFlBR25DYSxFQUFXWixLQUFLSCxTQUFXLEVBQUtjLEVBQ2hDRSxFQUFXYixLQUFLRixTQUFXLEVBQUthLEVBRTdCRyxFQUFJRixFQUFTRSxFQUFJWCxFQUFJRSxPQUFPQyxNQUFPUSxHQUFLSCxFQUMvQ1IsRUFBSVksT0FBT0QsRUFBRyxHQUNkWCxFQUFJYSxPQUFPRixFQUFHWCxFQUFJRSxPQUFPRSxRQUczQixJQUFLLElBQUlVLEVBQUlKLEVBQVNJLEVBQUlkLEVBQUlFLE9BQU9FLE9BQVFVLEdBQUtOLEVBQ2hEUixFQUFJWSxPQUFPLEVBQUdFLEdBQ2RkLEVBQUlhLE9BQU9iLEVBQUlFLE9BQU9DLE1BQU9XLEdBVS9CLElBUkFkLEVBQUllLFNBSUpmLEVBQUlLLFlBQ0pMLEVBQUlPLFVBQVksRUFDaEJQLEVBQUlNLFlBQWMsUUFFVEssRUFBSUYsRUFBVUQsRUFBVUcsRUFBSVgsRUFBSUUsT0FBT0MsTUFBUUssRUFBVUcsR0FBS0gsRUFDckUsSUFBU00sRUFBSUosRUFBVUYsRUFBVU0sRUFBSWQsRUFBSUUsT0FBT0UsT0FBU0ksRUFBVU0sR0FBS04sRUFDdEVSLEVBQUlZLE9BQU9ELEVBQUdHLEdBQ1ZmLEVBQWMsVUFBR2lCLEtBQUtDLE1BQU1OLEVBQUlILEVBQVdYLEtBQUtILFNBQVcsS0FBSyxZQUFJc0IsS0FBS0MsTUFBTUgsRUFBSU4sRUFBV1gsS0FBS0YsU0FBVyxTQUNoSEssRUFBSWtCLFVBQVksUUFDaEJsQixFQUFJbUIsU0FBU1IsRUFBR0csRUFBR04sRUFBVUEsR0FDN0JSLEVBQUlvQixXQUFXVCxFQUFHRyxFQUFHTixFQUFVQSxJQUlyQ1IsRUFBSXFCLE9BQ0pyQixFQUFJZSxRQUNOLEVBQ0YsRUExREEsRyxVQ0NlLFNBQVNPLEVBQVFDLEdBQzlCLElBQU1DLEVBQWlCLENBQUMsRUFDeEIsSUFBSyxJQUFNQyxLQUFPRixFQUFRLENBS3hCLElBSkEsSUFBTUcsRUFBUUQsRUFBSUUsTUFBTSxLQUFLQyxLQUFJLFNBQUNDLEdBQU0sT0FBQUMsT0FBT0QsRUFBUCxJQUlqQixNQUZhRSxFQUFrQkwsR0FFL0IsZUFBVyxDQUE3QixJQUFNTSxFQUFRLEtBQ1pULEVBQU8sVUFBR1MsRUFBUyxHQUFFLFlBQUlBLEVBQVMsTUFDakNDLEVBQU1ELEVBQVVULEtBQ2xCQyxFQUFVLFVBQUdRLEVBQVMsR0FBRSxZQUFJQSxFQUFTLE1BQVEsRUFHbkQsQ0FFSUMsRUFBTVAsRUFBT0gsR0FBUSxLQUN2QkMsRUFBVSxVQUFHRSxFQUFNLEdBQUUsWUFBSUEsRUFBTSxNQUFRLEVBRTNDLENBQ0EsT0FBT0YsQ0FDVCxDQUVBLFNBQVNPLEVBQWtCTCxHQUV6QixJQURBLElBQUlRLEVBQWdDLEdBQzNCQyxHQUFLLEVBQUdBLEdBQUssRUFBR0EsSUFDdkIsSUFBSyxJQUFJQyxHQUFLLEVBQUdBLEdBQUssRUFBR0EsSUFDZCxHQUFMRCxHQUFlLEdBQUxDLEdBQ1pGLEVBQVVHLEtBQUssQ0FBQ1gsRUFBTSxHQUFLUyxFQUFHVCxFQUFNLEdBQUtVLElBSS9DLE9BQU9GLENBQ1QsQ0FFQSxTQUFTRCxFQUFNUCxFQUF5QkgsRUFBYWUsUUFBQSxJQUFBQSxJQUFBQSxHQUFBLEdBQ25ELElBQ01DLEVBRFlSLEVBQWtCTCxHQUNMRSxLQUFJLFNBQUNZLEdBQU0sUUFBRWpCLEVBQU8sVUFBR2lCLEVBQUUsR0FBRSxZQUFJQSxFQUFFLElBQXRCLElBQTZCQyxRQUFPLFNBQUNELEdBQU0sT0FBQUEsQ0FBQSxJQUFHRSxPQUN4RixPQUFJSixHQUNxQixHQUFoQkMsR0FFYyxHQUFoQkEsQ0FDVCxDQ3hDQSxJQUdNckMsRUFBU3lDLFNBQVNDLGVBQWUsYUFDakM1QyxFQUFNRSxFQUFPMkMsV0FBVyxNQUM5QjdDLEVBQUlFLE9BQU9DLE1BQVEyQyxPQUFPQyxXQUMxQi9DLEVBQUlFLE9BQU9FLE9BQVMwQyxPQUFPRSxZQUMzQixJQThFSUMsRUE5RUUsRUFBTyxJQUFJLEVBQUtqRCxHQUVsQkQsRUFBcUIsQ0FBQyxFQXVFMUIsU0FBU21ELElBQ1BuRCxFQUFnQnVCLEVBQVF2QixHQUN4QixFQUFLRCxLQUFLQyxFQUNaLENBeEVBLEVBQUtELEtBQUtDLEdBMkVWLElBQUlvRCxFQUFRLElBOEJaakQsRUFBT2tELGlCQUFpQixXQTVCeEIsU0FBZUMsR0FDRSxLQUFYQSxFQUFJNUIsTUFDRndCLEdBQ0ZLLGNBQWNMLEdBQ2RBLEVBQVcsTUFFWEEsRUFBV00sWUFBWUwsRUFBZUMsSUFHM0IsY0FBWEUsRUFBSTVCLE1BQ04wQixHQUFTLEdBQ1RHLGNBQWNMLEdBQ2RBLEVBQVdNLFlBQVlMLEVBQWVDLEdBQ3RDSyxRQUFRQyxJQUFJTixJQUVDLGFBQVhFLEVBQUk1QixNQUNOMEIsR0FBUyxFQUNURyxjQUFjTCxHQUNkQSxFQUFXTSxZQUFZTCxFQUFlQyxHQUN0Q0ssUUFBUUMsSUFBSU4sSUFFQyxXQUFYRSxFQUFJNUIsTUFDRHdCLEdBQ0hDLElBR04sSUFHQWhELEVBQU9rRCxpQkFBaUIsU0F4R3hCLFNBQWlCTSxHQUNmLElBQU1DLEVBZFksSUFjR0QsRUFBTUUsT0FDM0IsRUFBS2hFLGFBQWUrRCxFQUVoQixFQUFLL0QsWUFBYyxLQUNyQixFQUFLQSxZQUFjLElBR2pCLEVBQUtBLFlBQWMsTUFDckIsRUFBS0EsWUFBYyxLQUdyQixJQUFNaUUsRUFBVUgsRUFBTUksUUFDaEJDLEVBQVVMLEVBQU1NLFFBTWhCQyxFQUFVTixHQUpGRSxFQUFVM0QsRUFBT0MsT0FLekIrRCxFQUFVUCxHQUpGSSxFQUFVN0QsRUFBT0UsUUFNL0IsRUFBS1YsVUFBWXVFLEVBQ2pCLEVBQUt0RSxVQUFZdUUsRUFFakIsRUFBS3BFLEtBQUtDLEVBQ1osSUErRUFHLEVBQU9rRCxpQkFBaUIsU0E3RXhCLFNBQWlCTSxHQUNmLElBQU0vQyxFQUFJK0MsRUFBTUksUUFDVmhELEVBQUk0QyxFQUFNTSxRQUVWeEQsRUFBV1IsRUFBSUUsT0FBT0MsTUFBUSxFQUFLUCxZQUVuQ3VFLEVBQVNuRCxLQUFLQyxNQUFPTixFQUFJSCxFQUFXLEVBQUtkLFNBQVcsS0FDcEQwRSxFQUFTcEQsS0FBS0MsTUFBT0gsRUFBSU4sRUFBVyxFQUFLYixTQUFXLEtBRTFESSxFQUFjLFVBQUdvRSxFQUFNLFlBQUlDLEtBQVksRUFHdkMsRUFBS3RFLEtBQUtDLEdBQ1Z1QixFQUFRdkIsRUFDVixJQWdFQUcsRUFBT2tELGlCQUFpQixlQTlEeEIsU0FBdUJNLEdBQ3JCQSxFQUFNVyxpQkFDTixJQUFNMUQsRUFBSStDLEVBQU1JLFFBQ1ZoRCxFQUFJNEMsRUFBTU0sUUFFVnhELEVBQVdSLEVBQUlFLE9BQU9DLE1BQVEsRUFBS1AsWUFFbkN1RSxFQUFTbkQsS0FBS0MsTUFBT04sRUFBSUgsRUFBVyxFQUFLZCxTQUFXLEtBQ3BEMEUsRUFBU3BELEtBQUtDLE1BQU9ILEVBQUlOLEVBQVcsRUFBS2IsU0FBVyxZQUVuREksRUFBYyxVQUFHb0UsRUFBTSxZQUFJQyxJQUVsQyxFQUFLdEUsS0FBS0MsRUFDWixJQWtEQStDLE9BQU9NLGlCQUFpQixVQWhEeEIsV0FDRXBELEVBQUlFLE9BQU9DLE1BQVEyQyxPQUFPQyxXQUMxQi9DLEVBQUlFLE9BQU9FLE9BQVMwQyxPQUFPRSxZQUUzQixFQUFLbEQsS0FBS0MsRUFDWixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGNzcy00MzUtYS8uL3NyYy9ncmlkLnRzIiwid2VicGFjazovL3Rjc3MtNDM1LWEvLi9zcmMvcGVybXV0ZS50cyIsIndlYnBhY2s6Ly90Y3NzLTQzNS1hLy4vc3JjL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8qKiBTaW1wbGUgd2F5IG9mIGRyYXdpbmcgYSB1bmlmb3JtIGdyaWQgb24gc2NyZWVuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdyaWQge1xyXG4gIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHJcbiAgY3VycmVudFg6IG51bWJlciA9IDAuOTtcclxuICBjdXJyZW50WTogbnVtYmVyID0gMC45O1xyXG4gIGN1cnJlbnRab29tOiBudW1iZXIgPSAxMDtcclxuXHJcbiAgY29uc3RydWN0b3IoY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSB7XHJcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gIH1cclxuXHJcbiAgZHJhdyhjdXJyZW50QmxvY2tzOiBNYXApIHtcclxuICAgIC8vZHJhdyB0aGUgZ3JpZFxyXG4gICAgY29uc3QgY3R4ID0gdGhpcy5jb250ZXh0O1xyXG4gICAgLy8gY2xlYXIgdGhlIGNhbnZhc1xyXG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSAnZ3JleSc7XHJcbiAgICBjdHgubGluZVdpZHRoID0gMTtcclxuXHJcbiAgICBcclxuICAgIC8vIHRoZSB3aWR0aCBvZiBlYWNoIGdyaWQgY2VsbFxyXG4gICAgY29uc3QgZ3JpZFNpemUgPSBjdHguY2FudmFzLndpZHRoIC8gdGhpcy5jdXJyZW50Wm9vbTtcclxuXHJcblxyXG4gICAgY29uc3QgeE9mZnNldCA9ICh0aGlzLmN1cnJlbnRYICUgMSkgKiBncmlkU2l6ZTtcclxuICAgIGNvbnN0IHlPZmZzZXQgPSAodGhpcy5jdXJyZW50WSAlIDEpICogZ3JpZFNpemU7XHJcblxyXG4gICAgZm9yIChsZXQgeCA9IHhPZmZzZXQ7IHggPCBjdHguY2FudmFzLndpZHRoOyB4ICs9IGdyaWRTaXplKSB7XHJcbiAgICAgIGN0eC5tb3ZlVG8oeCwgMCk7XHJcbiAgICAgIGN0eC5saW5lVG8oeCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgIH1cclxuICAgIGZvciAobGV0IHkgPSB5T2Zmc2V0OyB5IDwgY3R4LmNhbnZhcy5oZWlnaHQ7IHkgKz0gZ3JpZFNpemUpIHtcclxuICAgICAgY3R4Lm1vdmVUbygwLCB5KTtcclxuICAgICAgY3R4LmxpbmVUbyhjdHguY2FudmFzLndpZHRoLCB5KTtcclxuICAgIH1cclxuICAgIGN0eC5zdHJva2UoKTtcclxuXHJcbiAgICAvLyBkcmF3IHRoZSBibG9ja3NcclxuXHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICBjdHgubGluZVdpZHRoID0gMTtcclxuICAgIGN0eC5zdHJva2VTdHlsZSA9ICd3aGl0ZSc7XHJcblxyXG4gICAgZm9yIChsZXQgeCA9IHhPZmZzZXQgLSBncmlkU2l6ZTsgeCA8IGN0eC5jYW52YXMud2lkdGggKyBncmlkU2l6ZTsgeCArPSBncmlkU2l6ZSkge1xyXG4gICAgICBmb3IgKGxldCB5ID0geU9mZnNldCAtIGdyaWRTaXplOyB5IDwgY3R4LmNhbnZhcy5oZWlnaHQgKyBncmlkU2l6ZTsgeSArPSBncmlkU2l6ZSkge1xyXG4gICAgICAgIGN0eC5tb3ZlVG8oeCwgeSk7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRCbG9ja3NbYCR7TWF0aC5mbG9vcih4IC8gZ3JpZFNpemUgLSB0aGlzLmN1cnJlbnRYICsgMC4wMSl9LCR7TWF0aC5mbG9vcih5IC8gZ3JpZFNpemUgLSB0aGlzLmN1cnJlbnRZICsgMC4wMSl9YF0pIHtcclxuICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnd2hpdGUnO1xyXG4gICAgICAgICAgY3R4LmZpbGxSZWN0KHgsIHksIGdyaWRTaXplLCBncmlkU2l6ZSk7XHJcbiAgICAgICAgICBjdHguc3Ryb2tlUmVjdCh4LCB5LCBncmlkU2l6ZSwgZ3JpZFNpemUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY3R4LmZpbGwoKTtcclxuICAgIGN0eC5zdHJva2UoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIE1hcCA9IHtba2V5OiBgJHtudW1iZXJ9LCR7bnVtYmVyfWBdOiBib29sZWFufTsiLCJpbXBvcnQgeyBNYXAgfSBmcm9tICcuL2dyaWQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGVybXV0ZShibG9ja3M6IE1hcCkge1xyXG4gIGNvbnN0IG5ld0Jsb2NrczogTWFwID0ge307XHJcbiAgZm9yIChjb25zdCBrZXkgaW4gYmxvY2tzKSB7XHJcbiAgICBjb25zdCBjb29yZCA9IGtleS5zcGxpdChcIixcIikubWFwKChzKSA9PiBOdW1iZXIocykpIGFzIFtudW1iZXIsIG51bWJlcl07XHJcblxyXG4gICAgbGV0IGFkamFjZW50czogW251bWJlciwgbnVtYmVyXVtdID0gZ2V0QWRqYWNlbnRDb29yZHMoY29vcmQpXHJcblxyXG4gICAgZm9yIChjb25zdCBhZGphY2VudCBvZiBhZGphY2VudHMpIHtcclxuICAgICAgaWYgKCFibG9ja3NbYCR7YWRqYWNlbnRbMF19LCR7YWRqYWNlbnRbMV19YF0pIHtcclxuICAgICAgICBpZiAoYWxpdmUoYWRqYWNlbnQsIGJsb2NrcykpIHtcclxuICAgICAgICAgIG5ld0Jsb2Nrc1tgJHthZGphY2VudFswXX0sJHthZGphY2VudFsxXX1gXSA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoYWxpdmUoY29vcmQsIGJsb2NrcywgdHJ1ZSkpIHtcclxuICAgICAgbmV3QmxvY2tzW2Ake2Nvb3JkWzBdfSwke2Nvb3JkWzFdfWBdID0gdHJ1ZVxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbmV3QmxvY2tzXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEFkamFjZW50Q29vcmRzKGNvb3JkOiBbbnVtYmVyLCBudW1iZXJdKTogW251bWJlciwgbnVtYmVyXVtdIHtcclxuICBsZXQgYWRqYWNlbnRzOiBbbnVtYmVyLCBudW1iZXJdW10gPSBbXVxyXG4gIGZvciAobGV0IGkgPSAtMTsgaSA8PSAxOyBpKyspIHtcclxuICAgIGZvciAobGV0IGogPSAtMTsgaiA8PSAxOyBqKyspIHtcclxuICAgICAgaWYgKGkgIT0gMCB8fCBqICE9IDApIHtcclxuICAgICAgICBhZGphY2VudHMucHVzaChbY29vcmRbMF0gKyBpLCBjb29yZFsxXSArIGpdKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBhZGphY2VudHNcclxufVxyXG5cclxuZnVuY3Rpb24gYWxpdmUoY29vcmQ6IFtudW1iZXIsIG51bWJlcl0sIGJsb2NrczogTWFwLCBpc0FsaXZlID0gZmFsc2UpIHtcclxuICBjb25zdCBhZGphY2VudHMgPSBnZXRBZGphY2VudENvb3Jkcyhjb29yZCk7XHJcbiAgY29uc3Qgc3Vycm91bmRpbmdzID0gYWRqYWNlbnRzLm1hcCgoYSkgPT4gISFibG9ja3NbYCR7YVswXX0sJHthWzFdfWBdKS5maWx0ZXIoKGEpID0+IGEpLmxlbmd0aFxyXG4gIGlmIChpc0FsaXZlKSB7XHJcbiAgICByZXR1cm4gc3Vycm91bmRpbmdzID09IDIgfHwgc3Vycm91bmRpbmdzID09IDNcclxuICB9XHJcbiAgcmV0dXJuIHN1cnJvdW5kaW5ncyA9PSAzXHJcbn0iLCJpbXBvcnQgR3JpZCwgeyBNYXAgfSBmcm9tIFwiLi9ncmlkXCI7XHJcbmltcG9ydCBwZXJtdXRlIGZyb20gXCIuL3Blcm11dGVcIjtcclxuXHJcbmNvbnN0IHNjcm9sbFNjYWxlID0gMC4wMTtcclxuXHJcblxyXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZVdvcmxkJykgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbmNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5jdHguY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbmN0eC5jYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG5jb25zdCBncmlkID0gbmV3IEdyaWQoY3R4KTtcclxuXHJcbmxldCBjdXJyZW50QmxvY2tzOiBNYXAgPSB7fTtcclxuXHJcbmdyaWQuZHJhdyhjdXJyZW50QmxvY2tzKTtcclxuXHJcbmZ1bmN0aW9uIG9uV2hlZWwoZXZlbnQ6IFdoZWVsRXZlbnQpIHtcclxuICBjb25zdCBzY3JvbGxUcmF2ZWwgPSBldmVudC5kZWx0YVkgKiBzY3JvbGxTY2FsZTtcclxuICBncmlkLmN1cnJlbnRab29tICs9IHNjcm9sbFRyYXZlbDtcclxuXHJcbiAgaWYgKGdyaWQuY3VycmVudFpvb20gPCAxMCkge1xyXG4gICAgZ3JpZC5jdXJyZW50Wm9vbSA9IDEwO1xyXG4gIH1cclxuXHJcbiAgaWYgKGdyaWQuY3VycmVudFpvb20gPiAxMDApIHtcclxuICAgIGdyaWQuY3VycmVudFpvb20gPSAxMDA7XHJcbiAgfVxyXG4gIFxyXG4gIGNvbnN0IGNlbnRlclggPSBldmVudC5jbGllbnRYO1xyXG4gIGNvbnN0IGNlbnRlclkgPSBldmVudC5jbGllbnRZO1xyXG5cclxuICBjb25zdCB4QmlhcyA9IGNlbnRlclggLyBjYW52YXMud2lkdGg7XHJcbiAgY29uc3QgeUJpYXMgPSBjZW50ZXJZIC8gY2FudmFzLmhlaWdodDtcclxuXHJcblxyXG4gIGNvbnN0IHhUcmF2ZWwgPSBzY3JvbGxUcmF2ZWwgKiB4QmlhcztcclxuICBjb25zdCB5VHJhdmVsID0gc2Nyb2xsVHJhdmVsICogeUJpYXM7XHJcblxyXG4gIGdyaWQuY3VycmVudFggKz0geFRyYXZlbDtcclxuICBncmlkLmN1cnJlbnRZICs9IHlUcmF2ZWw7XHJcblxyXG4gIGdyaWQuZHJhdyhjdXJyZW50QmxvY2tzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25DbGljayhldmVudDogTW91c2VFdmVudCkge1xyXG4gIGNvbnN0IHggPSBldmVudC5jbGllbnRYO1xyXG4gIGNvbnN0IHkgPSBldmVudC5jbGllbnRZO1xyXG5cclxuICBjb25zdCBncmlkU2l6ZSA9IGN0eC5jYW52YXMud2lkdGggLyBncmlkLmN1cnJlbnRab29tO1xyXG5cclxuICBjb25zdCB4QmxvY2sgPSBNYXRoLmZsb29yKCh4IC8gZ3JpZFNpemUgLSBncmlkLmN1cnJlbnRYICsgMC4wMSkpO1xyXG4gIGNvbnN0IHlCbG9jayA9IE1hdGguZmxvb3IoKHkgLyBncmlkU2l6ZSAtIGdyaWQuY3VycmVudFkgKyAwLjAxKSk7XHJcblxyXG4gIGN1cnJlbnRCbG9ja3NbYCR7eEJsb2NrfSwke3lCbG9ja31gXSA9IHRydWU7XHJcblxyXG5cclxuICBncmlkLmRyYXcoY3VycmVudEJsb2Nrcyk7XHJcbiAgcGVybXV0ZShjdXJyZW50QmxvY2tzKVxyXG59XHJcblxyXG5mdW5jdGlvbiBvbkNvbnRleHRNZW51KGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICBjb25zdCB4ID0gZXZlbnQuY2xpZW50WDtcclxuICBjb25zdCB5ID0gZXZlbnQuY2xpZW50WTtcclxuXHJcbiAgY29uc3QgZ3JpZFNpemUgPSBjdHguY2FudmFzLndpZHRoIC8gZ3JpZC5jdXJyZW50Wm9vbTtcclxuXHJcbiAgY29uc3QgeEJsb2NrID0gTWF0aC5mbG9vcigoeCAvIGdyaWRTaXplIC0gZ3JpZC5jdXJyZW50WCArIDAuMDEpKTtcclxuICBjb25zdCB5QmxvY2sgPSBNYXRoLmZsb29yKCh5IC8gZ3JpZFNpemUgLSBncmlkLmN1cnJlbnRZICsgMC4wMSkpO1xyXG5cclxuICBkZWxldGUgY3VycmVudEJsb2Nrc1tgJHt4QmxvY2t9LCR7eUJsb2NrfWBdO1xyXG5cclxuICBncmlkLmRyYXcoY3VycmVudEJsb2Nrcyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uUmVzaXplKCkge1xyXG4gIGN0eC5jYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICBjdHguY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICBcclxuICBncmlkLmRyYXcoY3VycmVudEJsb2Nrcyk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBwZXJtdXRlQmxvY2tzKCkge1xyXG4gIGN1cnJlbnRCbG9ja3MgPSBwZXJtdXRlKGN1cnJlbnRCbG9ja3MpO1xyXG4gIGdyaWQuZHJhdyhjdXJyZW50QmxvY2tzKTtcclxufVxyXG5cclxubGV0IGludGVydmFsOiBOb2RlSlMuVGltZW91dDtcclxubGV0IHNwZWVkID0gMjUwO1xyXG5cclxuZnVuY3Rpb24gb25LZXkoZXZ0OiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgaWYgKGV2dC5rZXkgPT0gJyAnKSB7XHJcbiAgICBpZiAoaW50ZXJ2YWwpIHtcclxuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcbiAgICAgIGludGVydmFsID0gbnVsbDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwocGVybXV0ZUJsb2Nrcywgc3BlZWQpO1xyXG4gICAgfVxyXG4gIH1cclxuICBpZiAoZXZ0LmtleSA9PSAnQXJyb3dSaWdodCcpIHtcclxuICAgIHNwZWVkICo9IDAuNTtcclxuICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG4gICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChwZXJtdXRlQmxvY2tzLCBzcGVlZCk7XHJcbiAgICBjb25zb2xlLmxvZyhzcGVlZCk7XHJcbiAgfVxyXG4gIGlmIChldnQua2V5ID09ICdBcnJvd0xlZnQnKSB7XHJcbiAgICBzcGVlZCAqPSAyO1xyXG4gICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XHJcbiAgICBpbnRlcnZhbCA9IHNldEludGVydmFsKHBlcm11dGVCbG9ja3MsIHNwZWVkKTtcclxuICAgIGNvbnNvbGUubG9nKHNwZWVkKTtcclxuICB9XHJcbiAgaWYgKGV2dC5rZXkgPT0gJ0Fycm93VXAnKSB7XHJcbiAgICBpZiAoIWludGVydmFsKSB7XHJcbiAgICAgIHBlcm11dGVCbG9ja3MoKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXkpO1xyXG5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBvbldoZWVsKTtcclxuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGljayk7XHJcbmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIG9uQ29udGV4dE1lbnUpO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25SZXNpemUpOyJdLCJuYW1lcyI6WyJjb250ZXh0IiwiY3VycmVudFgiLCJjdXJyZW50WSIsImN1cnJlbnRab29tIiwidGhpcyIsImRyYXciLCJjdXJyZW50QmxvY2tzIiwiY3R4IiwiY2xlYXJSZWN0IiwiY2FudmFzIiwid2lkdGgiLCJoZWlnaHQiLCJiZWdpblBhdGgiLCJzdHJva2VTdHlsZSIsImxpbmVXaWR0aCIsImdyaWRTaXplIiwieE9mZnNldCIsInlPZmZzZXQiLCJ4IiwibW92ZVRvIiwibGluZVRvIiwieSIsInN0cm9rZSIsIk1hdGgiLCJmbG9vciIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwic3Ryb2tlUmVjdCIsImZpbGwiLCJwZXJtdXRlIiwiYmxvY2tzIiwibmV3QmxvY2tzIiwia2V5IiwiY29vcmQiLCJzcGxpdCIsIm1hcCIsInMiLCJOdW1iZXIiLCJnZXRBZGphY2VudENvb3JkcyIsImFkamFjZW50IiwiYWxpdmUiLCJhZGphY2VudHMiLCJpIiwiaiIsInB1c2giLCJpc0FsaXZlIiwic3Vycm91bmRpbmdzIiwiYSIsImZpbHRlciIsImxlbmd0aCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb250ZXh0Iiwid2luZG93IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiaW50ZXJ2YWwiLCJwZXJtdXRlQmxvY2tzIiwic3BlZWQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwiY29uc29sZSIsImxvZyIsImV2ZW50Iiwic2Nyb2xsVHJhdmVsIiwiZGVsdGFZIiwiY2VudGVyWCIsImNsaWVudFgiLCJjZW50ZXJZIiwiY2xpZW50WSIsInhUcmF2ZWwiLCJ5VHJhdmVsIiwieEJsb2NrIiwieUJsb2NrIiwicHJldmVudERlZmF1bHQiXSwic291cmNlUm9vdCI6IiJ9